



<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="utf-8">
  <title>Query – Typstドキュメント日本語版</title>
  <meta name="description" content="`query` 函数的文档">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="theme-color" content="#239dad">
  <meta property="og:url" content="https://typst-doc-cn.github.io/docs/reference/introspection/query/">
  <meta property="og:title" content="Query – Typstドキュメント日本語版">
  <meta property="og:site_name" content="Typst">
  <meta property="og:description" content="`query` 函数的文档">
  <meta property="og:type">
  <meta property="og:image" content="https://typst-doc-cn.github.io/assets/social.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta name="twitter:site" content="@typstapp">
  <meta name="twitter:card" content="summary_large_image">
  <link rel="canonical" href="https://typst-doc-cn.github.io/docs/reference/introspection/query/">
  <meta name="twitter:image:alt"
    content="The left side of a text editor with colorful cursors, as well as the text &#x27;Compose papers faster, Typst&#x27;">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon.ico">
  <!-- <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon.ico"> -->
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png">
  <link rel="mask-icon" href="/assets/safari-pinned-tab.svg" color="#239dad">
  <link rel="manifest" href="/assets/site.webmanifest">
  <link rel="stylesheet" href="/styles/default.css?bust=20230913?d=2023-09-16">
  <link rel="stylesheet" href="/styles/docs.css?bust=20230915?d=2023-09-16">
  <link rel="stylesheet" href="/styles/docs-cn.css">
  <link rel="preload" href="/assets/fonts/HKGrotesk-Regular.woff2" as="font">
  <link rel="preload" href="/assets/fonts/HKGrotesk-Bold.woff2" as="font">
  <link rel="preload" href="/assets/fonts/HKGrotesk-SemiBold.woff2" as="font">
  <link rel="preload" href="/assets/fonts/CascadiaMono-Regular-Sub.woff2" as="font">
  <link rel="preload" href="/assets/images/blur.webp" as="image">
  
  <script>document.documentElement.className = document.documentElement.className.replace("no-js", "js"), document.addEventListener("DOMContentLoaded", (() => { const e = document.cookie.split("; ").find((e => e.startsWith("INSECURE_SIGNED_IN=")))?.split("=")[1].toLowerCase(); if ("1" === e || "true" === e || "yes" === e) { document.documentElement.classList.add("signed-in"); const e = document.querySelector("header nav a.nav-btn"), t = document.querySelector("header nav a.sign-in"); e && (e.innerHTML = "Go to app", e.setAttribute("href", "/app/")), t && (t.innerHTML = "Sign out", t.setAttribute("href", "https://api.typst.app/v1/auth/logout")) } }))</script>
</head>

<body class="no-js docs has-outline">
  <div class="alert">
    <div class="alert-content">
      <span>⚠ <b>注意</b>  当サイトは、<a href="https://typst.app/docs/">Typst v0.11.0 公式ドキュメント</a>を、日本語コミュニティが非公式に翻訳したものです。誤訳・未訳・古い情報が含まれている可能性があるため、<a href="https://typst.app/docs/">公式ドキュメント</a> との併用を推奨します。このサイトの内容に誤りを発見された方は、<a href="https://github.com/typst-jp/typst-jp.github.io">GitHubリポジトリまでご報告を頂けましたら幸いです</a>。我々のコミュニティにご興味のある方は、ぜひ<a href="https://discord.gg/9xF7k4aAuH">非公式Discordサーバー「くみはんクラブ」</a>にご参加ください。</span>
      <br />
      <span>⚠ <b>Warning:</b>   This site provides an unofficial translation of the <a href="https://typst.app/docs/">Typst v0.11.0 documentation</a> by the Japanese Community. Please note that there may be some inaccuracies, untranslated sections or outdated information. We highly recommend referring to <a href="https://typst.app/docs/">the latest official documentation</a> as well. If you find any errors in the content, <a href="https://github.com/typst-jp/typst-jp.github.io">please let us know through our GitHub repository.</a> If you are interested in our community, feel free to join <a href="https://discord.gg/9xF7k4aAuH">our unofficial Discord server, “Kumihan Club.”</a></span>
    </div>
  </div>
  <header class="boring">
    <div><a href="/docs" class="logo-box"><svg width="91" height="35" viewBox="0 0 91 35" role="img"
          aria-labelledby="logo-label">
          <title id="logo-label">Typst</title>
          <use href="/assets/images/typst.svg#logo"></use>
        </svg><span>ドキュメント日本語版</span></a><button class="hamburger"><img alt="Open navigation"
          src="/assets/icons/16-hamburger-dark.svg" width="16" height="16"></button>
      <nav>
        <ul>
          <li class="social"><a href="https://x.com/mkpoli/status/1802227029447725538" title="関連ツイート"><svg width="16" height="16" role="img"
                aria-labelledby="svg-twitter-label">
                <title id="svg-twitter-label">Twitter</title>
                <use href="/assets/icons/social.svg#twitter"></use>
              </svg></a></li>
          <li class="social"><a href="https://discord.gg/9xF7k4aAuH" title="「くみはんクラブ」Discordサーバー"><svg width="16" height="16" role="img"
                aria-labelledby="svg-discord-label">
                <title id="svg-discord-label">Discord</title>
                <use href="/assets/icons/social.svg#discord"></use>
              </svg></a></li>
          <li class="social"><a href="https://github.com/typst-jp/typst-jp.github.io" title="本プロジェクトのGitHubレポジトリ"><svg width="16" height="16" role="img"
                aria-labelledby="svg-github-label">
                <title id="svg-github-label">GitHub</title>
                <use href="/assets/icons/social.svg#github"></use>
              </svg></a></li>
          <li class="secondary"><a href="https://typst.app/">Typst公式サイト</a></li>
          <li class="secondary"><a href="https://typst.app/docs/">Typst公式ドキュメント</a></li>
          <!-- <li class="secondary"><a href="/signin/" class="sign-in">Sign in</a></li>
          <li><a href="/signup" id="header-btn" class="nav-btn btn">Sign up</a></li> -->
        </ul>
      </nav>
    </div>
  </header>
  <div class="main-grid">
    <nav class="folding"><a href="/docs" class="title-row"><svg width="91" height="35" viewBox="0 0 91 35" role="img"
          aria-labelledby="logo-label-nav">
          <title id="logo-label-nav">Typst</title>
          <use href="/assets/images/typst.svg#logo"></use>
        </svg><span>ドキュメント日本語版</span></a>
      <button class="close"><img alt="Close" src="/assets/icons/16-close-dark.svg"
          width="16" height="16"></button>
      <div class="search"><img src="/assets/icons/16-search-gray.svg" alt="Search" width="16" height="16"><input
          type="search" placeholder="検索" id="docs-search"></div>
      <ul class="search-results hidden" id="search-results"></ul>
      <ul>
        
        
        <li>
          <a href="/docs/" >Typstについて</a>
          
        </li>
        
        
        <li>
          <a href="/docs/tutorial/" >チュートリアル</a>
          
          <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
          <ul>
            
            
            <li>
              <a href="/docs/tutorial/writing-in-typst/" >Typstで執筆するには</a>
              
            </li>
            
            
            <li>
              <a href="/docs/tutorial/formatting/" >書式を設定する</a>
              
            </li>
            
            
            <li>
              <a href="/docs/tutorial/advanced-styling/" >高度なスタイリング</a>
              
            </li>
            
            
            <li>
              <a href="/docs/tutorial/making-a-template/" >テンプレートを作成する</a>
              
            </li>
            
          </ul>
          
        </li>
        
        
        <li>
          <a href="/docs/japanese/" >日本語ユーザーガイド</a>
          
        </li>
        
        
        <li>
          <a href="/docs/reference/" >リファレンス</a>
          
          <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
          <ul>
            
            
            
            <li class="category">Language</li>
            
            <li>
              <a href="/docs/reference/syntax/" >構文</a>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/styling/" >Styling</a>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/scripting/" >Scripting</a>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/context/" >コンテキスト</a>
              
            </li>
            
            
            
            
            <li>
              <a href="/docs/reference/types/" >类型（旧）</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/types/none/" >None</a></li>
                
                
                <li><a href="/docs/reference/types/auto/" >Auto</a></li>
                
                
                <li><a href="/docs/reference/types/boolean/" >Boolean</a></li>
                
                
                <li><a href="/docs/reference/types/integer/" >Integer</a></li>
                
                
                <li><a href="/docs/reference/types/float/" >Float</a></li>
                
                
                <li><a href="/docs/reference/types/length/" >Length</a></li>
                
                
                <li><a href="/docs/reference/types/angle/" >Angle</a></li>
                
                
                <li><a href="/docs/reference/types/ratio/" >Ratio</a></li>
                
                
                <li><a href="/docs/reference/types/relative-length/" >Relative Length</a></li>
                
                
                <li><a href="/docs/reference/types/fraction/" >Fraction</a></li>
                
                
                <li><a href="/docs/reference/types/color/" >Color</a></li>
                
                
                <li><a href="/docs/reference/types/datetime/" >Datetime</a></li>
                
                
                <li><a href="/docs/reference/types/symbol/" >Symbol</a></li>
                
                
                <li><a href="/docs/reference/types/string/" >String</a></li>
                
                
                <li><a href="/docs/reference/types/content/" >Content</a></li>
                
                
                <li><a href="/docs/reference/types/array/" >Array</a></li>
                
                
                <li><a href="/docs/reference/types/dictionary/" >Dictionary</a></li>
                
                
                <li><a href="/docs/reference/types/function/" >Function</a></li>
                
                
                <li><a href="/docs/reference/types/arguments/" >Arguments</a></li>
                
                
                <li><a href="/docs/reference/types/selector/" >Selector</a></li>
                
                
                <li><a href="/docs/reference/types/module/" >Module</a></li>
                
              </ul>
              
            </li>

            
            <li class="category">Library</li>
            
            <li>
              <a href="/docs/reference/foundations/" >基础</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/foundations/arguments/" >Arguments</a></li>
                
                
                <li><a href="/docs/reference/foundations/array/" >Array</a></li>
                
                
                <li><a href="/docs/reference/foundations/assert/" >Assert</a></li>
                
                
                <li><a href="/docs/reference/foundations/bool/" >Boolean</a></li>
                
                
                <li><a href="/docs/reference/foundations/bytes/" >Bytes</a></li>
                
                
                <li><a href="/docs/reference/foundations/content/" >Content</a></li>
                
                
                <li><a href="/docs/reference/foundations/datetime/" >Datetime</a></li>
                
                
                <li><a href="/docs/reference/foundations/dictionary/" >Dictionary</a></li>
                
                
                <li><a href="/docs/reference/foundations/duration/" >Duration</a></li>
                
                
                <li><a href="/docs/reference/foundations/eval/" >Evaluate</a></li>
                
                
                <li><a href="/docs/reference/foundations/float/" >Float</a></li>
                
                
                <li><a href="/docs/reference/foundations/function/" >Function</a></li>
                
                
                <li><a href="/docs/reference/foundations/int/" >Integer</a></li>
                
                
                <li><a href="/docs/reference/foundations/label/" >Label</a></li>
                
                
                <li><a href="/docs/reference/foundations/module/" >Module</a></li>
                
                
                <li><a href="/docs/reference/foundations/panic/" >Panic</a></li>
                
                
                <li><a href="/docs/reference/foundations/plugin/" >Plugin</a></li>
                
                
                <li><a href="/docs/reference/foundations/regex/" >Regex</a></li>
                
                
                <li><a href="/docs/reference/foundations/repr/" >Representation</a></li>
                
                
                <li><a href="/docs/reference/foundations/selector/" >Selector</a></li>
                
                
                <li><a href="/docs/reference/foundations/str/" >String</a></li>
                
                
                <li><a href="/docs/reference/foundations/style/" >Style</a></li>
                
                
                <li><a href="/docs/reference/foundations/type/" >Type</a></li>
                
                
                <li><a href="/docs/reference/foundations/version/" >Version</a></li>
                
                
                <li><a href="/docs/reference/foundations/sys" >System</a></li>
                
                
                <li><a href="/docs/reference/foundations/calc" >Calculation</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/model/" >模型</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/model/bibliography/" >参考文献</a></li>
                
                
                <li><a href="/docs/reference/model/list/" >Bullet List</a></li>
                
                
                <li><a href="/docs/reference/model/cite/" >引用</a></li>
                
                
                <li><a href="/docs/reference/model/document/" >文档</a></li>
                
                
                <li><a href="/docs/reference/model/emph/" >强调（斜体）</a></li>
                
                
                <li><a href="/docs/reference/model/figure/" >图表</a></li>
                
                
                <li><a href="/docs/reference/model/footnote/" >脚注</a></li>
                
                
                <li><a href="/docs/reference/model/heading/" >Heading</a></li>
                
                
                <li><a href="/docs/reference/model/link/" >Link</a></li>
                
                
                <li><a href="/docs/reference/model/enum/" >有序列表</a></li>
                
                
                <li><a href="/docs/reference/model/numbering/" >Numbering</a></li>
                
                
                <li><a href="/docs/reference/model/outline/" >Outline</a></li>
                
                
                <li><a href="/docs/reference/model/par/" >Paragraph</a></li>
                
                
                <li><a href="/docs/reference/model/parbreak/" >Paragraph Break</a></li>
                
                
                <li><a href="/docs/reference/model/quote/" >Quote</a></li>
                
                
                <li><a href="/docs/reference/model/ref/" >Reference</a></li>
                
                
                <li><a href="/docs/reference/model/strong/" >着重强调（加粗）</a></li>
                
                
                <li><a href="/docs/reference/model/table/" >Table</a></li>
                
                
                <li><a href="/docs/reference/model/terms/" >Term List</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/text/" >文本</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/text/highlight/" >文本高亮</a></li>
                
                
                <li><a href="/docs/reference/text/linebreak/" >换行</a></li>
                
                
                <li><a href="/docs/reference/text/lorem/" >假文</a></li>
                
                
                <li><a href="/docs/reference/text/lower/" >转小写</a></li>
                
                
                <li><a href="/docs/reference/text/overline/" >上划线</a></li>
                
                
                <li><a href="/docs/reference/text/raw/" >原始文本/代码块</a></li>
                
                
                <li><a href="/docs/reference/text/smallcaps/" >显示为小写</a></li>
                
                
                <li><a href="/docs/reference/text/smartquote/" >智能引号</a></li>
                
                
                <li><a href="/docs/reference/text/strike/" >删除线</a></li>
                
                
                <li><a href="/docs/reference/text/sub/" >下标</a></li>
                
                
                <li><a href="/docs/reference/text/super/" >上标</a></li>
                
                
                <li><a href="/docs/reference/text/text/" >文本</a></li>
                
                
                <li><a href="/docs/reference/text/underline/" >下划线</a></li>
                
                
                <li><a href="/docs/reference/text/upper/" >转大写</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/math/" >数学</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/math/accent/" >重音符号</a></li>
                
                
                <li><a href="/docs/reference/math/cancel/" >删除线</a></li>
                
                
                <li><a href="/docs/reference/math/cases/" >左大括号</a></li>
                
                
                <li><a href="/docs/reference/math/class/" >类</a></li>
                
                
                <li><a href="/docs/reference/math/equation/" >数学表达式</a></li>
                
                
                <li><a href="/docs/reference/math/frac/" >分数</a></li>
                
                
                <li><a href="/docs/reference/math/mat/" >矩阵</a></li>
                
                
                <li><a href="/docs/reference/math/op/" >文本运算符</a></li>
                
                
                <li><a href="/docs/reference/math/vec/" >向量</a></li>
                
                
                <li><a href="/docs/reference/math/underover" >上/下方内容</a></li>
                
                
                <li><a href="/docs/reference/math/variants" >字体变体</a></li>
                
                
                <li><a href="/docs/reference/math/sizes" >显示尺寸</a></li>
                
                
                <li><a href="/docs/reference/math/lr" >Left/Right</a></li>
                
                
                <li><a href="/docs/reference/math/styles" >显示样式</a></li>
                
                
                <li><a href="/docs/reference/math/roots" >根式</a></li>
                
                
                <li><a href="/docs/reference/math/attach" >附缀</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/symbols/" >符号</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/symbols/sym/" >通用</a></li>
                
                
                <li><a href="/docs/reference/symbols/emoji/" >表情符号</a></li>
                
                
                <li><a href="/docs/reference/symbols/symbol/" >符号</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/layout/" >布局</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/layout/align/" >Align</a></li>
                
                
                <li><a href="/docs/reference/layout/alignment/" >Alignment</a></li>
                
                
                <li><a href="/docs/reference/layout/angle/" >Angle</a></li>
                
                
                <li><a href="/docs/reference/layout/block/" >Block</a></li>
                
                
                <li><a href="/docs/reference/layout/box/" >Box</a></li>
                
                
                <li><a href="/docs/reference/layout/colbreak/" >Column Break</a></li>
                
                
                <li><a href="/docs/reference/layout/columns/" >Columns</a></li>
                
                
                <li><a href="/docs/reference/layout/direction/" >Direction</a></li>
                
                
                <li><a href="/docs/reference/layout/fraction/" >Fraction</a></li>
                
                
                <li><a href="/docs/reference/layout/grid/" >Grid</a></li>
                
                
                <li><a href="/docs/reference/layout/hide/" >Hide</a></li>
                
                
                <li><a href="/docs/reference/layout/layout/" >Layout</a></li>
                
                
                <li><a href="/docs/reference/layout/length/" >Length</a></li>
                
                
                <li><a href="/docs/reference/layout/measure/" >Measure</a></li>
                
                
                <li><a href="/docs/reference/layout/move/" >Move</a></li>
                
                
                <li><a href="/docs/reference/layout/pad/" >Padding</a></li>
                
                
                <li><a href="/docs/reference/layout/page/" >Page</a></li>
                
                
                <li><a href="/docs/reference/layout/pagebreak/" >Page Break</a></li>
                
                
                <li><a href="/docs/reference/layout/place/" >Place</a></li>
                
                
                <li><a href="/docs/reference/layout/ratio/" >Ratio</a></li>
                
                
                <li><a href="/docs/reference/layout/relative/" >Relative Length</a></li>
                
                
                <li><a href="/docs/reference/layout/repeat/" >Repeat</a></li>
                
                
                <li><a href="/docs/reference/layout/rotate/" >Rotate</a></li>
                
                
                <li><a href="/docs/reference/layout/scale/" >Scale</a></li>
                
                
                <li><a href="/docs/reference/layout/h/" >Spacing (H)</a></li>
                
                
                <li><a href="/docs/reference/layout/v/" >Spacing (V)</a></li>
                
                
                <li><a href="/docs/reference/layout/stack/" >Stack</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/visualize/" >可视化</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/visualize/circle/" >Circle</a></li>
                
                
                <li><a href="/docs/reference/visualize/color/" >Color</a></li>
                
                
                <li><a href="/docs/reference/visualize/ellipse/" >Ellipse</a></li>
                
                
                <li><a href="/docs/reference/visualize/gradient/" >Gradient</a></li>
                
                
                <li><a href="/docs/reference/visualize/image/" >Image</a></li>
                
                
                <li><a href="/docs/reference/visualize/line/" >Line</a></li>
                
                
                <li><a href="/docs/reference/visualize/path/" >Path</a></li>
                
                
                <li><a href="/docs/reference/visualize/pattern/" >Pattern</a></li>
                
                
                <li><a href="/docs/reference/visualize/polygon/" >Polygon</a></li>
                
                
                <li><a href="/docs/reference/visualize/rect/" >Rectangle</a></li>
                
                
                <li><a href="/docs/reference/visualize/square/" >Square</a></li>
                
                
                <li><a href="/docs/reference/visualize/stroke/" >Stroke</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/introspection/" >内省</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/introspection/counter/" >Counter</a></li>
                
                
                <li><a href="/docs/reference/introspection/locate/" >Locate</a></li>
                
                
                <li><a href="/docs/reference/introspection/location/" >Location</a></li>
                
                
                <li><a href="/docs/reference/introspection/metadata/" >Metadata</a></li>
                
                
                <li><a href="/docs/reference/introspection/query/"  aria-current="page" >Query</a></li>
                
                
                <li><a href="/docs/reference/introspection/state/" >State</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/data-loading/" >数据加载</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/data-loading/cbor/" >CBOR</a></li>
                
                
                <li><a href="/docs/reference/data-loading/csv/" >CSV</a></li>
                
                
                <li><a href="/docs/reference/data-loading/json/" >JSON</a></li>
                
                
                <li><a href="/docs/reference/data-loading/read/" >Read</a></li>
                
                
                <li><a href="/docs/reference/data-loading/toml/" >TOML</a></li>
                
                
                <li><a href="/docs/reference/data-loading/xml/" >XML</a></li>
                
                
                <li><a href="/docs/reference/data-loading/yaml/" >YAML</a></li>
                
              </ul>
              
            </li>
            
          </ul>
          
        </li>
        
        
        <li>
          <a href="/docs/guides/" >Guides</a>
          
          <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
          <ul>
            
            
            <li>
              <a href="/docs/guides/guide-for-latex-users/" >Guide for LaTeX users</a>
              
            </li>
            
            
            <li>
              <a href="/docs/guides/page-setup-guide/" >Page setup guide</a>
              
            </li>
            
            
            <li>
              <a href="/docs/guides/table-guide/" >Table guide</a>
              
            </li>
            
          </ul>
          
        </li>
        
        
        <li>
          <a href="/docs/packages/" >Packages</a>
          
        </li>
        
        
        <li>
          <a href="/docs/changelog/" >Changelog</a>
          
        </li>
        
        
        <li>
          <a href="/docs/roadmap/" >Roadmap</a>
          
        </li>
        
        
        <li>
          <a href="/docs/community/" >Community</a>
          
        </li>
        
        
        <li>
          <a href="/docs/glossary/" >用語集</a>
          
        </li>
        
      </ul>

    </nav>
    <main>
      <ul class="breadcrumbs" aria-label="Breadcrumbs">
        <li class="root"><a href="/docs/"><img src="/assets/icons/16-docs-dark.svg" alt="Docs" width="16"
              height="16"></a></li>

        
        <li aria-hidden="true"><img src="/assets/icons/16-arrow-right.svg" width="16" height="16" alt=""></li>
        <li><a href="/docs/reference/">リファレンス</a></li>
        
        <li aria-hidden="true"><img src="/assets/icons/16-arrow-right.svg" width="16" height="16" alt=""></li>
        <li><a href="/docs/reference/introspection/">内省</a></li>
        
        <li aria-hidden="true"><img src="/assets/icons/16-arrow-right.svg" width="16" height="16" alt=""></li>
        <li><a href="/docs/reference/introspection/query/">Query</a></li>
        
      </ul>

      

<h1 id="summary"><code>query</code><small></small></h1>
<p>Finds elements in the document.</p>
<p>The <code>query</code> functions lets you search your document for elements of a
particular type or with a particular label. To use it, you first need to
retrieve the current document location with the <a href="/docs/reference/introspection/locate/"><code>locate</code></a>
function.</p>
<h2 id="finding-elements">Finding elements</h2>
<p>In the example below, we create a custom page header that displays the text
&quot;Typst Academy&quot; in small capitals and the current section title. On the
first page, the section title is omitted because the header is before the
first section heading.</p>
<p>To realize this layout, we call <code>locate</code> and then query for all headings
after the current location. The function we pass to locate is called twice
in this case: Once per page.</p>
<ul>
<li>
<p>On the first page the query for all headings before the current location
yields an empty array: There are no previous headings. We check for this
case and and just display &quot;Typst Academy&quot;.</p>
</li>
<li>
<p>For the second page, we retrieve the last element from the query's result.
This is the latest heading before the current position and as such, it is
the heading of the section we are currently in. We access its content
through the <code>body</code> field and display it alongside &quot;Typst Academy&quot;.</p>
</li>
</ul>
<div class="previewed-code"><pre><code><span class="typ-key">#</span><span class="typ-key">set</span> <span class="typ-func">page</span><span class="typ-punct">(</span>header<span class="typ-punct">:</span> <span class="typ-func">locate</span><span class="typ-punct">(</span>loc <span class="typ-op">=&gt;</span> <span class="typ-punct">{</span>
  <span class="typ-key">let</span> elems <span class="typ-op">=</span> <span class="typ-func">query</span><span class="typ-punct">(</span>
    <span class="typ-func">selector</span><span class="typ-punct">(</span>heading<span class="typ-punct">)</span><span class="typ-punct">.</span><span class="typ-func">before</span><span class="typ-punct">(</span>loc<span class="typ-punct">)</span><span class="typ-punct">,</span>
    loc<span class="typ-punct">,</span>
  <span class="typ-punct">)</span>
  <span class="typ-key">let</span> academy <span class="typ-op">=</span> <span class="typ-func">smallcaps</span><span class="typ-punct">[</span>
    Typst Academy
  <span class="typ-punct">]</span>
  <span class="typ-key">if</span> elems <span class="typ-op">==</span> <span class="typ-punct">(</span><span class="typ-punct">)</span> <span class="typ-punct">{</span>
    <span class="typ-func">align</span><span class="typ-punct">(</span>right<span class="typ-punct">,</span> academy<span class="typ-punct">)</span>
  <span class="typ-punct">}</span> <span class="typ-key">else</span> <span class="typ-punct">{</span>
    <span class="typ-key">let</span> body <span class="typ-op">=</span> elems<span class="typ-punct">.</span><span class="typ-func">last</span><span class="typ-punct">(</span><span class="typ-punct">)</span><span class="typ-punct">.</span>body
    academy <span class="typ-op">+</span> <span class="typ-func">h</span><span class="typ-punct">(</span><span class="typ-num">1fr</span><span class="typ-punct">)</span> <span class="typ-op">+</span> <span class="typ-func">emph</span><span class="typ-punct">(</span>body<span class="typ-punct">)</span>
  <span class="typ-punct">}</span>
<span class="typ-punct">}</span><span class="typ-punct">)</span><span class="typ-punct">)</span>

<span class="typ-heading">= Introduction</span>
<span class="typ-func">#</span><span class="typ-func">lorem</span><span class="typ-punct">(</span><span class="typ-num">23</span><span class="typ-punct">)</span>

<span class="typ-heading">= Background</span>
<span class="typ-func">#</span><span class="typ-func">lorem</span><span class="typ-punct">(</span><span class="typ-num">30</span><span class="typ-punct">)</span>

<span class="typ-heading">= Analysis</span>
<span class="typ-func">#</span><span class="typ-func">lorem</span><span class="typ-punct">(</span><span class="typ-num">15</span><span class="typ-punct">)</span>
</code></pre><div class="preview"><img src="/assets/docs/9322e1b471f29e6f896a589b09fceaef.png" alt="Preview" width="480" height="190"/></div></div>
<h2 id="caution">A word of caution</h2>
<p>To resolve all your queries, Typst evaluates and layouts parts of the
document multiple times. However, there is no guarantee that your queries
can actually be completely resolved. If you aren't careful a query can
affect itself—leading to a result that never stabilizes.</p>
<p>In the example below, we query for all headings in the document. We then
generate as many headings. In the beginning, there's just one heading,
titled <code>Real</code>. Thus, <code>count</code> is <code>1</code> and one <code>Fake</code> heading is generated.
Typst sees that the query's result has changed and processes it again. This
time, <code>count</code> is <code>2</code> and two <code>Fake</code> headings are generated. This goes on and
on. As we can see, the output has five headings. This is because Typst
simply gives up after five attempts.</p>
<p>In general, you should try not to write queries that affect themselves. The
same words of caution also apply to other introspection features like
<a href="/docs/reference/introspection/counter/">counters</a> and <a href="/docs/reference/introspection/state/">state</a>.</p>
<div class="previewed-code"><pre><code><span class="typ-heading">= Real</span>
<span class="typ-func">#</span><span class="typ-func">locate</span><span class="typ-punct">(</span>loc <span class="typ-op">=&gt;</span> <span class="typ-punct">{</span>
  <span class="typ-key">let</span> elems <span class="typ-op">=</span> <span class="typ-func">query</span><span class="typ-punct">(</span>heading<span class="typ-punct">,</span> loc<span class="typ-punct">)</span>
  <span class="typ-key">let</span> count <span class="typ-op">=</span> elems<span class="typ-punct">.</span><span class="typ-func">len</span><span class="typ-punct">(</span><span class="typ-punct">)</span>
  count <span class="typ-op">*</span> <span class="typ-punct">[</span><span class="typ-heading">= Fake</span><span class="typ-punct">]</span>
<span class="typ-punct">}</span><span class="typ-punct">)</span>
</code></pre><div class="preview"><img src="/assets/docs/d50c8346f758c5e45b6800b3e9654d80.png" alt="Preview" width="480" height="190"/></div></div>
<h2 id="command-line-queries">Command line queries</h2>
<p>You can also perform queries from the command line with the <code>typst query</code>
command. This command executes an arbitrary query on the document and
returns the resulting elements in serialized form. Consider the following
<code>example.typ</code> file which contains some invisible <a href="/docs/reference/introspection/metadata/">metadata</a>:</p>
<pre><code><span class="typ-func">#</span><span class="typ-func">metadata</span><span class="typ-punct">(</span><span class="typ-str">&quot;This is a note&quot;</span><span class="typ-punct">)</span> <span class="typ-label">&lt;note&gt;</span>
</code></pre>
<p>You can execute a query on it as follows using Typst's CLI:</p>
<pre style="background-color:#ffffff;">
<span style="color:#4b69c6;">$</span><span style="color:#000000;"> typst query example.typ </span><span style="color:#298e0d;">&quot;&lt;note&gt;&quot;
</span><span style="color:#4b69c6;">[
</span><span style="color:#000000;">  {
</span><span style="color:#000000;">    </span><span style="color:#298e0d;">&quot;func&quot;</span><span style="color:#4b69c6;">: </span><span style="color:#298e0d;">&quot;metadata&quot;</span><span style="color:#000000;">,
</span><span style="color:#000000;">    </span><span style="color:#298e0d;">&quot;value&quot;</span><span style="color:#4b69c6;">: </span><span style="color:#298e0d;">&quot;This is a note&quot;</span><span style="color:#000000;">,
</span><span style="color:#000000;">    </span><span style="color:#298e0d;">&quot;label&quot;</span><span style="color:#4b69c6;">: </span><span style="color:#298e0d;">&quot;&lt;note&gt;&quot;
</span><span style="color:#000000;">  }
</span><span style="color:#4b69c6;">]
</span></pre>
<p>Frequently, you're interested in only one specific field of the resulting
elements. In the case of the <code>metadata</code> element, the <code>value</code> field is the
interesting one. You can extract just this field with the <code>--field</code>
argument.</p>
<pre style="background-color:#ffffff;">
<span style="color:#4b69c6;">$</span><span style="color:#000000;"> typst query example.typ </span><span style="color:#298e0d;">&quot;&lt;note&gt;&quot;</span><span style="color:#000000;"> --field value
</span><span style="color:#4b69c6;">[</span><span style="color:#298e0d;">&quot;This is a note&quot;</span><span style="color:#4b69c6;">]
</span></pre>
<p>If you are interested in just a single element, you can use the <code>--one</code>
flag to extract just it.</p>
<pre style="background-color:#ffffff;">
<span style="color:#4b69c6;">$</span><span style="color:#000000;"> typst query example.typ </span><span style="color:#298e0d;">&quot;&lt;note&gt;&quot;</span><span style="color:#000000;"> --field value --one
</span><span style="color:#298e0d;">&quot;This is a note&quot;
</span></pre>
<h2 id="parameters">
  
<span aria-describedby="parameters-tooltip">参数</span>
<div class="tooltip-context"><svg width="12" height="12" viewBox="0 0 12 12" tabindex="0" role="img"
    aria-labelledby="parameters-tooltip-qm-label">
    <title id="parameters-tooltip-qm-label">参数是函数的输入，它们在函数名称后面的括号中传入。</title>
    <use href="/assets/icons/12-tooltip.svg#icon"></use>
  </svg>
  <div role="tooltip" id="parameters-tooltip" tabindex="-1">参数是函数的输入，它们在函数名称后面的括号中传入。</div>
</div>

</h2>

<div class="code code-definition "><span
    class="typ-func">query</span>(<div class="arguments"><span
      class="overview-param"><a href="/docs/reference/types/label" class="pill pill-obj">label</a><a href="/docs/reference/types/selector" class="pill pill-obj">selector</a><a href="/docs/reference/types/function" class="pill pill-fn">function</a>, </span><span
      class="overview-param"><a href="/docs/reference/types/location" class="pill pill-obj">location</a>, </span></div>) <!-- -->-&gt; <a href="/docs/reference/types/array" class="pill pill-obj">array</a></div>




<h4 id="query-query-parameters-target"><code>target</code>
  <div class="additional-info">
    <div>
      
      <a href="/docs/reference/types/label" class="pill pill-obj">label</a>
      
      <a href="/docs/reference/types/selector" class="pill pill-obj">selector</a>
      
      <a href="/docs/reference/types/function" class="pill pill-fn">function</a>
      
    </div>
    <small>必需参数</small><small><span
        aria-describedby="query-query-parameters-target-positional-tooltip">位置参数</span>
      <div class="tooltip-context"><svg width="12" height="12" viewBox="0 0 12 12" tabindex="0" role="img"
          aria-labelledby="query-query-parameters-target-positional-tooltip-qm-label">
          <title id="query-query-parameters-target-positional-tooltip-qm-label">
            位置参数按顺序传入，不带名称。</title>
          <use href="/assets/icons/12-tooltip.svg#icon"></use>
        </svg>
        <div role="tooltip" id="query-query-parameters-target-positional-tooltip"
          tabindex="-1">位置参数按顺序传入，不带名称。</div>
      </div>
    </small>
  </div>
</h4>
<p>Can be an element function like a <code>heading</code> or <code>figure</code>, a <code><span class="typ-label">&lt;label&gt;</span></code>
or a more complex selector like <code>heading<span class="typ-punct">.</span><span class="typ-func">where</span><span class="typ-punct">(</span>level<span class="typ-punct">:</span> <span class="typ-num">1</span><span class="typ-punct">)</span></code>.</p>
<p>Currently, only a subset of element functions is supported. Aside from
headings and figures, this includes equations, references and all
elements with an explicit label. As a result, you <em>can</em> query for e.g.
<a href="/docs/reference/model/strong/"><code>strong</code></a> elements, but you will find only those that have an
explicit label attached to them. This limitation will be resolved in the
future.</p>




<h4 id="query-query-parameters-location"><code>location</code>
  <div class="additional-info">
    <div>
      
      <a href="/docs/reference/types/location" class="pill pill-obj">location</a>
      
    </div>
    <small>必需参数</small><small><span
        aria-describedby="query-query-parameters-location-positional-tooltip">位置参数</span>
      <div class="tooltip-context"><svg width="12" height="12" viewBox="0 0 12 12" tabindex="0" role="img"
          aria-labelledby="query-query-parameters-location-positional-tooltip-qm-label">
          <title id="query-query-parameters-location-positional-tooltip-qm-label">
            位置参数按顺序传入，不带名称。</title>
          <use href="/assets/icons/12-tooltip.svg#icon"></use>
        </svg>
        <div role="tooltip" id="query-query-parameters-location-positional-tooltip"
          tabindex="-1">位置参数按顺序传入，不带名称。</div>
      </div>
    </small>
  </div>
</h4>
<p>Can be an arbitrary location, as its value is irrelevant for the
function's return value. Why is it required then? As noted before, Typst
has to evaluate parts of your code multiple times to determine the
values of all state. By only allowing this function within
<a href="/docs/reference/introspection/locate/"><code>locate</code></a> calls, the amount of code that can depend on the
query's result is reduced. If you could call it directly at the top
level of a module, the evaluation of the whole module and its exports
could depend on the query's result.</p>












      
      <div class="page-end-buttons"><a href="/docs/reference/introspection/metadata/" class="previous"><img
            src="/assets/icons/16-arrow-right.svg" alt="←">
          <div><span class="page-title">Metadata</span><span class="hint">前に戻る</span></div>
        </a><a href="/docs/reference/introspection/state/" class="next"><img src="/assets/icons/16-arrow-right.svg" alt="→">
          <div><span class="page-title">State</span><span class="hint">次に進む</span></div>
        </a></div>
      
    </main>

    
    <nav id="page-overview"><strong>目次</strong>
      <ul>
        
        <li data-assoc="summary"><a href="#summary">Summary</a>
          <ul></ul>
        </li>
        
        <li data-assoc="finding-elements"><a href="#finding-elements">Finding Elements</a>
          <ul></ul>
        </li>
        
        <li data-assoc="caution"><a href="#caution">Caution</a>
          <ul></ul>
        </li>
        
        <li data-assoc="command-line-queries"><a href="#command-line-queries">Command Line Queries</a>
          <ul></ul>
        </li>
        
        <li data-assoc="parameters"><a href="#parameters">Parameters</a>
          <ul></ul>
        </li>
        
      </ul>
    </nav>
    
  </div>
  <footer>
    <div>
      <ul>
        <li><a href="https://typst.app/">（公式）ホームページ</a></li>
        <li><a href="https://typst.app/docs/">（公式）ドキュメント（英語）</a></li>
        <li><a href="https://typst.app/universe/">（公式）拡張パッケージ・テンプレートの宇宙</a></li>
        <li><a href="https://typst.app/about/">（公式）Typstについて</a></li>
        <li><a href="https://typst.app/contact/">（公式）連絡先</a></li>
        <li><a href="https://typst.app/privacy/">（公式）プライバシーポリシー</a></li>
        <li><a href="https://typst.app/terms/">（公式）サービス規約</a></li>
        <li><a href="https://typst.app/legal/">（公式）免責事項</a></li>
      </ul>
    </div>
    <div>
      <ul>
        <li><a href="https://typst.app/tools/">（公式）ツール</a></li>
        <li><a href="https://typst.app/blog/">（公式）ブログ</a></li>
        <li><a href="https://twitter.com/typstapp/">（公式）Twitter</a></li>
        <li><a href="https://discord.gg/2uDybryKPe">（公式）Discord</a></li>
        <li><a rel="me" href="https://mastodon.social/@typst">（公式）Mastodon</a></li>
        <li><a href="https://www.linkedin.com/company/typst/">（公式）LinkedIn</a></li>
        <li><a href="https://instagram.com/typstapp/">（公式）Instagram</a></li>
        <li><a href="https://github.com/typst/">（公式）GitHub</a></li>
      </ul>
    </div>
    <div>
      <p>Made in Berlin</p>
      <p>Translated by <a href="https://github.com/typst-jp">Typst Japan Community</a></p>
    </div>
  </footer>
  <script src="/scripts/fuse.basic.min.js"></script>
  <script src="/scripts/docs.js?bust=20230913"></script>
  <script src="/scripts/analytics.js" defer></script>
</body>

</html>